<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Promotheans | News</title>
    <!-- Theme-aware favicon -->
    <link id="favicon" rel="icon" type="image/png" href="assets/light_favicon.png">
    <script>
        (function() {
            function updateFavicon() {
                const favicon = document.getElementById('favicon');
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    favicon.href = 'assets/dark_favicon.png';
                } else {
                    favicon.href = 'assets/light_favicon.png';
                }
            }
            updateFavicon();
            if (window.matchMedia) {
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateFavicon);
            }
        })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Finger+Paint&display=swap" rel="stylesheet">
    <link rel="preload" href="assets/digital.ttf" as="font" type="font/ttf" crossorigin>
    <style>
        @font-face {
            font-family: 'Digital';
            src: url('assets/digital.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Hide page content until loading is complete */
        body.loading {
            overflow: hidden;
        }

        body.loading > *:not(.loading-screen) {
            opacity: 0;
            visibility: hidden;
        }

        body.loaded > *:not(.loading-screen) {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.5s ease-in;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.3s ease-out;
            pointer-events: none;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-screen-content {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* Responsive Design for Loading Screen */
        @media (max-width: 768px) {
            .loading-percentage {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .loading-percentage {
                font-size: 1.5rem;
                text-shadow: 
                    0 0 3px rgba(255, 255, 255, 0.4),
                    0 0 6px rgba(255, 255, 255, 0.3);
            }
        }

        @media (max-width: 360px) {
            .loading-percentage {
                font-size: 1.2rem;
            }
        }

        .loading-percentage {
            margin-top: 0;
            font-family: 'Digital', 'Courier New', 'Monaco', 'Menlo', monospace;
            font-size: 2.5rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 
                0 0 5px rgba(255, 255, 255, 0.4),
                0 0 10px rgba(255, 255, 255, 0.3);
            letter-spacing: 0.2em;
            opacity: 1 !important;
            font-variant-numeric: tabular-nums;
            display: block !important;
            visibility: visible !important;
            text-align: center;
        }

        .loading-percentage.glitch {
            animation: glitchEffect 0.4s steps(10) !important;
        }

        @keyframes glitchEffect {
            0% {
                transform: translate(0, 0);
                text-shadow: 
                    0 0 10px rgba(255, 255, 255, 0.8),
                    0 0 20px rgba(255, 255, 255, 0.6),
                    0 0 30px rgba(255, 255, 255, 0.4);
                color: #ffffff;
            }
            10% {
                transform: translate(-3px, 2px) scale(1.02);
                text-shadow: 
                    -3px 2px 15px rgba(255, 0, 0, 1),
                    3px -2px 15px rgba(0, 255, 255, 1);
                color: #ff00ff;
            }
            20% {
                transform: translate(3px, -2px) scale(0.98);
                text-shadow: 
                    3px -2px 15px rgba(255, 0, 0, 1),
                    -3px 2px 15px rgba(0, 255, 255, 1);
                color: #00ffff;
            }
            30% {
                transform: translate(-2px, 2px) scale(1.01);
                text-shadow: 
                    -2px 2px 12px rgba(255, 0, 0, 0.9),
                    2px -2px 12px rgba(0, 255, 255, 0.9);
                color: #ff00ff;
            }
            40% {
                transform: translate(2px, -2px) scale(0.99);
                text-shadow: 
                    2px -2px 12px rgba(255, 0, 0, 0.9),
                    -2px 2px 12px rgba(0, 255, 255, 0.9);
                color: #00ffff;
            }
            50% {
                transform: translate(-3px, -3px) scale(1.02);
                text-shadow: 
                    -3px -3px 15px rgba(255, 0, 0, 1),
                    3px 3px 15px rgba(0, 255, 255, 1);
                color: #ff00ff;
            }
            60% {
                transform: translate(3px, 3px) scale(0.98);
                text-shadow: 
                    3px 3px 15px rgba(255, 0, 0, 1),
                    -3px -3px 15px rgba(0, 255, 255, 1);
                color: #00ffff;
            }
            70% {
                transform: translate(-1px, 0) scale(1.01);
                text-shadow: 
                    -1px 0 10px rgba(255, 0, 0, 0.7),
                    1px 0 10px rgba(0, 255, 255, 0.7);
                color: #ff00ff;
            }
            80% {
                transform: translate(1px, 0) scale(0.99);
                text-shadow: 
                    1px 0 10px rgba(255, 0, 0, 0.7),
                    -1px 0 10px rgba(0, 255, 255, 0.7);
                color: #00ffff;
            }
            90% {
                transform: translate(-1px, 1px) scale(1.005);
                text-shadow: 
                    -1px 1px 8px rgba(255, 0, 0, 0.6),
                    1px -1px 8px rgba(0, 255, 255, 0.6);
                color: #ff00ff;
            }
            100% {
                transform: translate(0, 0) scale(1);
                text-shadow: 
                    0 0 10px rgba(255, 255, 255, 0.8),
                    0 0 20px rgba(255, 255, 255, 0.6),
                    0 0 30px rgba(255, 255, 255, 0.4);
                color: #ffffff;
            }
        }

        @keyframes fadeInPercentage {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading-percentage::after {
            content: '%';
            margin-left: 5px;
        }

        html, body {
            overflow-x: hidden;
            width: 100%;
            max-width: 100%;
        }

        body {
            font-family: 'Finger Paint', sans-serif;
            background: #8b6f47;
            color: #2a2a2a;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Corkboard Texture Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    #9d7f57 0px,
                    #9d7f57 1px,
                    #8b6f47 1px,
                    #8b6f47 2px,
                    #7a5f3a 2px,
                    #7a5f3a 3px
                ),
                repeating-linear-gradient(
                    90deg,
                    #9d7f57 0px,
                    #9d7f57 1px,
                    #8b6f47 1px,
                    #8b6f47 2px,
                    #7a5f3a 2px,
                    #7a5f3a 3px
                ),
                radial-gradient(circle at 20% 30%, rgba(94, 123, 105, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(94, 123, 105, 0.1) 0%, transparent 50%);
            background-size: 4px 4px, 4px 4px, 100% 100%, 100% 100%;
            z-index: 0;
            opacity: 0.9;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(139, 111, 71, 0.3) 0%, transparent 30%),
                radial-gradient(circle at 90% 80%, rgba(122, 95, 58, 0.3) 0%, transparent 30%),
                url('data:image/svg+xml,<svg width="60" height="60" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="cork" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="%237a5f3a" opacity="0.3"/><circle cx="30" cy="20" r="0.8" fill="%239d7f57" opacity="0.2"/><circle cx="50" cy="40" r="1.2" fill="%238b6f47" opacity="0.25"/></pattern></defs><rect width="60" height="60" fill="url(%23cork)"/></svg>');
            z-index: 0;
            pointer-events: none;
            opacity: 0.6;
        }

        /* Logo inside bulletin board - positioned above Latest News */
        .bulletin-logo-link {
            display: block;
            margin-bottom: clamp(20px, 4vw, 40px);
            text-align: left;
            position: relative;
            z-index: 10;
        }

        .bulletin-logo {
            max-width: clamp(60px, 12vw, 150px);
            width: 100%;
            height: auto;
            cursor: pointer;
            filter: brightness(0);
            transition: transform 0.3s ease;
            display: block;
            position: relative;
            z-index: 10;
        }

        .bulletin-logo:hover {
            transform: scale(1.05);
        }

        /* Bulletin Board Frame - 2D Style with Uneven Black Border (Like Reference Image) */
        .bulletin-board {
            position: relative;
            max-width: 1400px;
            margin: clamp(40px, 6vw, 60px) auto;
            padding: clamp(30px, 5vw, 50px);
            background: #d4c4a8;
            border: clamp(2px, 0.4vw, 4px) solid #000000;
            z-index: 1;
            /* Light brown corkboard color like reference */
            box-shadow: none;
        }

        /* Uneven hand-drawn black border effect */
        .bulletin-board::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: clamp(2px, 0.4vw, 4px) solid #000000;
            clip-path: polygon(
                0% 0%, 2% 1%, 4% 0%, 6% 1.5%, 8% 0.5%, 10% 1%, 12% 0%, 14% 1.2%, 16% 0.3%, 18% 1%,
                20% 0.5%, 22% 1%, 24% 0%, 26% 1.3%, 28% 0.2%, 30% 1%, 32% 0.5%, 34% 1%, 36% 0%,
                38% 1.2%, 40% 0.3%, 42% 1%, 44% 0.5%, 46% 1%, 48% 0%, 50% 1.1%, 52% 0.4%, 54% 1%,
                56% 0.2%, 58% 1%, 60% 0.5%, 62% 1%, 64% 0%, 66% 1.3%, 68% 0.3%, 70% 1%, 72% 0.5%,
                74% 1%, 76% 0%, 78% 1.2%, 80% 0.4%, 82% 1%, 84% 0.2%, 86% 1%, 88% 0.5%, 90% 1%,
                92% 0%, 94% 1.1%, 96% 0.3%, 98% 1%, 100% 0%,
                100% 2%, 98% 3%, 96% 2.5%, 94% 3.2%, 92% 2%, 90% 3%, 88% 2.5%, 86% 3%, 84% 2%,
                82% 3.1%, 80% 2.3%, 78% 3%, 76% 2.5%, 74% 3%, 72% 2%, 70% 3.2%, 68% 2.4%, 66% 3%,
                64% 2%, 62% 3.1%, 60% 2.5%, 58% 3%, 56% 2.3%, 54% 3%, 52% 2%, 50% 3.2%, 48% 2.4%,
                46% 3%, 44% 2%, 42% 3.1%, 40% 2.5%, 38% 3%, 36% 2.3%, 34% 3%, 32% 2%, 30% 3.2%,
                28% 2.4%, 26% 3%, 24% 2%, 22% 3.1%, 20% 2.5%, 18% 3%, 16% 2.3%, 14% 3%, 12% 2%,
                10% 3.2%, 8% 2.4%, 6% 3%, 4% 2%, 2% 3.1%, 0% 2.5%,
                0% 98%, 2% 97%, 4% 98.5%, 6% 97%, 8% 98.5%, 10% 97%, 12% 98%, 14% 97.5%, 16% 98%,
                18% 97%, 20% 98.5%, 22% 97%, 24% 98%, 26% 97.5%, 28% 98%, 30% 97%, 32% 98.5%, 34% 97%,
                36% 98%, 38% 97.5%, 40% 98%, 42% 97%, 44% 98.5%, 46% 97%, 48% 98%, 50% 97.5%, 52% 98%,
                54% 97%, 56% 98.5%, 58% 97%, 60% 98%, 62% 97.5%, 64% 98%, 66% 97%, 68% 98.5%, 70% 97%,
                72% 98%, 74% 97.5%, 76% 98%, 78% 97%, 80% 98.5%, 82% 97%, 84% 98%, 86% 97.5%, 88% 98%,
                90% 97%, 92% 98.5%, 94% 97%, 96% 98%, 98% 97.5%, 100% 98%,
                100% 100%, 98% 99%, 96% 100%, 94% 99%, 92% 100%, 90% 99%, 88% 100%, 86% 99%, 84% 100%,
                82% 99%, 80% 100%, 78% 99%, 76% 100%, 74% 99%, 72% 100%, 70% 99%, 68% 100%, 66% 99%,
                64% 100%, 62% 99%, 60% 100%, 58% 99%, 56% 100%, 54% 99%, 52% 100%, 50% 99%, 48% 100%,
                46% 99%, 44% 100%, 42% 99%, 40% 100%, 38% 99%, 36% 100%, 34% 99%, 32% 100%, 30% 99%,
                28% 100%, 26% 99%, 24% 100%, 22% 99%, 20% 100%, 18% 99%, 16% 100%, 14% 99%, 12% 100%,
                10% 99%, 8% 100%, 6% 99%, 4% 100%, 2% 99%, 0% 100%, 0% 98%
            );
            z-index: 1;
            pointer-events: none;
        }

        /* Inner corkboard surface - Light brown like reference image */
        .bulletin-board::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    0deg,
                    #d4c4a8 0px,
                    #d4c4a8 1px,
                    #c9b89a 1px,
                    #c9b89a 2px,
                    #beac8c 2px,
                    #beac8c 3px
                ),
                repeating-linear-gradient(
                    90deg,
                    #d4c4a8 0px,
                    #d4c4a8 1px,
                    #c9b89a 1px,
                    #c9b89a 2px,
                    #beac8c 2px,
                    #beac8c 3px
                ),
                radial-gradient(circle at 20% 30%, rgba(139, 111, 71, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 111, 71, 0.15) 0%, transparent 50%),
                url('data:image/svg+xml,<svg width="60" height="60" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="cork" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1.5" fill="%23beac8c" opacity="0.4"/><circle cx="30" cy="20" r="1" fill="%23c9b89a" opacity="0.3"/><circle cx="50" cy="40" r="1.8" fill="%23d4c4a8" opacity="0.35"/><circle cx="15" cy="45" r="1.2" fill="%23beac8c" opacity="0.3"/><circle cx="45" cy="15" r="1" fill="%23c9b89a" opacity="0.35"/></pattern></defs><rect width="60" height="60" fill="url(%23cork)"/></svg>');
            background-size: 4px 4px, 4px 4px, 100% 100%, 100% 100%, 60px 60px;
            z-index: 0;
            opacity: 1;
            pointer-events: none;
        }



        /* Main Content */
        .news-container {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: clamp(100px, 15vw, 140px) clamp(20px, 5vw, 40px) 80px;
            /* Ensure content is inside the bulletin board */
        }

        .news-header {
            text-align: center;
            margin-bottom: clamp(50px, 8vw, 80px);
            padding-top: 20px;
        }

        .news-title {
            font-size: clamp(3rem, 8vw, 7rem);
            font-weight: 900;
            letter-spacing: clamp(4px, 2vw, 10px);
            margin-bottom: 25px;
            text-transform: uppercase;
            color: #000000;
            text-shadow: 
                4px 4px 0px rgba(94, 123, 105, 0.3),
                8px 8px 0px rgba(94, 123, 105, 0.15);
            line-height: 1;
            word-wrap: break-word;
            overflow-wrap: break-word;
            position: relative;
            display: inline-block;
            font-family: 'Finger Paint', sans-serif;
        }

        .news-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 0;
            width: 100%;
            height: 10px;
            background: #5e7b69;
            clip-path: polygon(0% 0%, 3% 100%, 97% 100%, 100% 0%);
            box-shadow: 0 4px 0px rgba(0, 0, 0, 0.2);
        }

        .news-subtitle {
            font-size: clamp(1.3rem, 3.5vw, 2.2rem);
            color: #000000;
            letter-spacing: clamp(3px, 1.5vw, 5px);
            font-weight: 800;
            line-height: 1.4;
            text-transform: uppercase;
            margin-top: 40px;
            text-shadow: 2px 2px 0px rgba(94, 123, 105, 0.2);
        }

        /* Timeline with Parallax Effect */
        .timeline {
            position: relative;
            padding: 100px 0 60px;
            perspective: 1000px;
            scroll-margin-top: 120px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: clamp(30px, 5vw, 50px);
            top: 0;
            bottom: 0;
            width: 10px;
            background: #000000;
            transform: translateX(-50%);
            /* Enhanced brush stroke effect - more irregular, hand-drawn look */
            clip-path: polygon(
                0% 0%, 
                8% 3%, 
                18% 1%, 
                28% 4%, 
                38% 0%, 
                48% 3%, 
                58% 1%, 
                68% 5%, 
                78% 2%, 
                88% 4%, 
                95% 1%, 
                100% 2%,
                100% 8%,
                92% 10%,
                82% 7%,
                72% 11%,
                62% 8%,
                52% 12%,
                42% 9%,
                32% 11%,
                22% 8%,
                12% 10%,
                5% 7%,
                0% 9%,
                0% 15%,
                10% 17%,
                20% 14%,
                30% 18%,
                40% 15%,
                50% 19%,
                60% 16%,
                70% 20%,
                80% 17%,
                90% 19%,
                98% 16%,
                100% 18%,
                100% 82%,
                98% 84%,
                90% 81%,
                80% 85%,
                70% 82%,
                60% 86%,
                50% 83%,
                40% 87%,
                30% 84%,
                20% 88%,
                10% 85%,
                5% 87%,
                0% 85%,
                0% 91%,
                8% 93%,
                18% 90%,
                28% 94%,
                38% 91%,
                48% 95%,
                58% 92%,
                68% 96%,
                78% 93%,
                88% 97%,
                95% 94%,
                100% 96%,
                100% 100%,
                92% 98%,
                82% 100%,
                72% 97%,
                62% 100%,
                52% 97%,
                42% 100%,
                32% 98%,
                22% 100%,
                12% 97%,
                5% 99%,
                0% 97%
            );
            box-shadow: 
                0 0 0 1px rgba(94, 123, 105, 0.5),
                0 2px 6px rgba(0, 0, 0, 0.3);
        }

        .timeline-item {
            position: relative;
            margin-bottom: clamp(60px, 10vw, 100px);
            padding-left: clamp(80px, 12vw, 120px);
            margin-right: clamp(10px, 3vw, 40px);
            opacity: 0;
            transform: translateY(80px) translateZ(-100px) rotateX(10deg);
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform, opacity;
            scroll-margin-top: 120px;
        }

        /* Marker container - positioned relative to timeline, not item */
        .timeline-item::before {
            content: '';
            position: absolute;
            left: clamp(30px, 5vw, 50px);
            top: 30px;
            width: 0;
            height: 0;
            z-index: 4;
            pointer-events: none;
        }

        /* Marker is positioned absolutely within timeline, not item, so it doesn't move with card animation */
        .timeline-item .timeline-marker {
            position: absolute;
            /* Position will be set by JavaScript relative to timeline container */
            /* Marker is always at its final position on the line, just appears instantly */
            transform: translateX(-50%) translateY(-50%) !important;
            /* Prevent marker from inheriting parent transforms */
            transform-style: preserve-3d;
            /* Marker doesn't move with parent's translateY */
            will-change: opacity, top, left;
        }

        .timeline-item:first-child {
            margin-top: clamp(40px, 6vw, 60px);
            scroll-margin-top: 150px;
            /* First card appears instantly if already in viewport */
            animation-delay: 0s !important;
        }
        
        /* Override for first card - instant appearance when visible */
        .timeline-item:first-child.parallax-visible {
            opacity: 1;
            transform: translateY(0) translateZ(0) rotateX(0deg) !important;
            transition: none !important;
        }

        /* Ensure first card marker is aligned same as others */
        .timeline-item:first-child .timeline-marker {
            top: 30px;
            transform: translateX(-50%) translateY(-50%);
        }

        .timeline-item.parallax-visible {
            opacity: 1;
            transform: translateY(0) translateZ(0) rotateX(0deg);
        }

        .timeline-item.parallax-active {
            transform: translateY(-10px) translateZ(10px) rotateX(-1deg);
        }

        .timeline-marker {
            width: clamp(32px, 5vw, 42px);
            height: clamp(32px, 5vw, 42px);
            transform-origin: center center;
            z-index: 4;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Marker is always positioned on line, just appears instantly */
            opacity: 0;
            will-change: opacity;
        }

        /* Marker design - big brush stroke cut effect */
        .timeline-marker::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: #000000;
            /* Brush stroke cut - irregular, hand-drawn shape */
            clip-path: polygon(
                20% 0%,
                35% 5%,
                50% 2%,
                65% 8%,
                80% 3%,
                95% 6%,
                100% 10%,
                98% 25%,
                100% 40%,
                97% 55%,
                100% 70%,
                98% 85%,
                100% 100%,
                85% 97%,
                70% 100%,
                55% 96%,
                40% 100%,
                25% 97%,
                10% 100%,
                0% 95%,
                3% 80%,
                0% 65%,
                4% 50%,
                0% 35%,
                3% 20%,
                0% 5%
            );
            box-shadow: 
                0 0 0 1px rgba(94, 123, 105, 0.8),
                0 4px 12px rgba(0, 0, 0, 0.5);
        }

        .timeline-marker::after {
            content: '';
            position: absolute;
            width: 60%;
            height: 60%;
            background: #5e7b69;
            /* Inner brush stroke cut */
            clip-path: polygon(
                15% 10%,
                30% 8%,
                45% 12%,
                60% 9%,
                75% 13%,
                90% 10%,
                95% 20%,
                100% 35%,
                97% 50%,
                100% 65%,
                95% 80%,
                90% 90%,
                75% 87%,
                60% 91%,
                45% 88%,
                30% 92%,
                15% 90%,
                5% 80%,
                0% 65%,
                3% 50%,
                0% 35%,
                5% 20%
            );
        }

        /* Marker appears instantly - already positioned on line */
        .timeline-item.parallax-visible .timeline-marker {
            opacity: 1;
            transition: opacity 0s;
        }

        /* Comic Style Newspaper Cards with Parallax */
        .timeline-content {
            position: relative;
            background: #ffffff;
            border: 5px solid #000000;
            border-radius: 0;
            padding: clamp(35px, 6vw, 50px) clamp(35px, 6vw, 50px);
            padding-bottom: clamp(50px, 8vw, 70px);
            box-shadow: 
                10px 10px 0px rgba(0, 0, 0, 0.4),
                20px 20px 0px rgba(0, 0, 0, 0.2),
                0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: rotate(-1.5deg) scale(0.98);
            color: #2a2a2a;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            overflow: visible;
            /* Subtle poster paper cuts - 2-3 cuts per edge */
            clip-path: polygon(
                0% 0%, 20% 2%, 50% 0%, 80% 1%, 100% 0%,
                100% 15%, 98% 45%, 100% 75%, 98% 95%,
                100% 100%, 80% 98%, 50% 100%, 20% 99%, 0% 100%,
                0% 85%, 2% 55%, 0% 25%, 2% 5%
            );
        }

        /* Newspaper texture overlay */
        .timeline-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    transparent 1px,
                    rgba(0, 0, 0, 0.015) 1px,
                    rgba(0, 0, 0, 0.015) 2px
                ),
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    transparent 1px,
                    rgba(0, 0, 0, 0.015) 1px,
                    rgba(0, 0, 0, 0.015) 2px
                );
            pointer-events: none;
            z-index: 1;
            opacity: 0.4;
        }

        /* Comic Style Tear Effect at Bottom */
        .timeline-content::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: #ffffff;
            clip-path: polygon(
                0% 0%,
                2% 15%,
                4% 5%,
                6% 20%,
                8% 8%,
                10% 18%,
                12% 3%,
                14% 16%,
                16% 7%,
                18% 19%,
                20% 4%,
                22% 17%,
                24% 9%,
                26% 21%,
                28% 6%,
                30% 15%,
                32% 2%,
                34% 18%,
                36% 10%,
                38% 20%,
                40% 5%,
                42% 16%,
                44% 8%,
                46% 19%,
                48% 3%,
                50% 17%,
                52% 11%,
                54% 20%,
                56% 6%,
                58% 15%,
                60% 4%,
                62% 18%,
                64% 9%,
                66% 21%,
                68% 7%,
                70% 16%,
                72% 2%,
                74% 19%,
                76% 12%,
                78% 20%,
                80% 5%,
                82% 17%,
                84% 8%,
                86% 19%,
                88% 3%,
                90% 16%,
                92% 10%,
                94% 21%,
                96% 6%,
                98% 15%,
                100% 0%
            );
            z-index: 1;
            pointer-events: none;
            border-top: 3px dashed #000000;
        }

        .timeline-item.parallax-visible .timeline-content {
            transform: rotate(-1.5deg) scale(1);
            box-shadow: 
                10px 10px 0px rgba(0, 0, 0, 0.5),
                20px 20px 0px rgba(0, 0, 0, 0.3),
                0 4px 8px rgba(0, 0, 0, 0.4);
        }

        .timeline-item.parallax-active .timeline-content {
            transform: rotate(0deg) scale(1.02) translateZ(15px);
            box-shadow: 
                15px 15px 0px rgba(0, 0, 0, 0.6),
                30px 30px 0px rgba(0, 0, 0, 0.4),
                0 6px 12px rgba(0, 0, 0, 0.5);
        }

        .timeline-item:nth-child(even) .timeline-content {
            transform: rotate(1.5deg) scale(0.98);
        }

        .timeline-item:nth-child(even).parallax-visible .timeline-content {
            transform: rotate(1.5deg) scale(1);
        }

        .timeline-item:nth-child(even).parallax-active .timeline-content {
            transform: rotate(0deg) scale(1.02) translateZ(15px);
        }

        .timeline-item:nth-child(3n) .timeline-content {
            transform: rotate(-0.8deg) scale(0.98);
        }

        .timeline-item:nth-child(3n).parallax-visible .timeline-content {
            transform: rotate(-0.8deg) scale(1);
        }

        /* Subtle poster paper cuts - variation 2 (even cards) - 2-3 cuts per edge */
        .timeline-item:nth-child(even) .timeline-content {
            clip-path: polygon(
                0% 1%, 15% 0%, 40% 2%, 70% 0%, 100% 1%,
                100% 20%, 99% 50%, 100% 80%, 99% 95%,
                100% 100%, 70% 99%, 40% 100%, 15% 98%, 0% 100%,
                0% 80%, 1% 50%, 0% 20%, 1% 5%
            );
        }

        /* Subtle poster paper cuts - variation 3 (3n cards) - 2-3 cuts per edge */
        .timeline-item:nth-child(3n) .timeline-content {
            clip-path: polygon(
                0% 0%, 25% 1%, 55% 0%, 85% 2%, 100% 0%,
                100% 18%, 98% 48%, 100% 78%, 99% 98%,
                100% 100%, 85% 99%, 55% 100%, 25% 98%, 0% 100%,
                0% 82%, 2% 52%, 0% 22%, 1% 2%
            );
        }

        /* Subtle poster paper cuts - variation 4 (featured card) - 2-3 cuts per edge */
        .featured-timeline-item .timeline-content {
            clip-path: polygon(
                0% 0%, 18% 1%, 45% 0%, 75% 2%, 100% 0%,
                100% 22%, 99% 52%, 100% 82%, 98% 97%,
                100% 100%, 75% 99%, 45% 100%, 18% 98%, 0% 100%,
                0% 78%, 1% 48%, 0% 18%, 2% 3%
            );
        }


        .timeline-content:hover {
            transform: rotate(0deg) translateY(-10px) scale(1.03) translateZ(20px) !important;
            box-shadow: 
                20px 20px 0px rgba(0, 0, 0, 0.7),
                40px 40px 0px rgba(0, 0, 0, 0.5),
                0 8px 16px rgba(0, 0, 0, 0.4);
            border-color: #000000;
            border-width: 6px;
        }

        /* Date - Comic Style Newspaper Badge */
        .timeline-date {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            font-size: clamp(0.95rem, 2.2vw, 1.15rem);
            font-weight: 900;
            color: #ffffff;
            margin-bottom: 15px;
            letter-spacing: 2px;
            display: inline-block;
            padding: clamp(10px, 2.5vw, 12px) clamp(18px, 4vw, 25px);
            background: #000000;
            border-radius: 0;
            border: 4px solid #5e7b69;
            box-shadow: 
                5px 5px 0px rgba(94, 123, 105, 0.5),
                10px 10px 0px rgba(94, 123, 105, 0.2);
            word-break: break-word;
            position: relative;
            z-index: 2;
            text-transform: uppercase;
        }

        /* Timezone styling */
        .timeline-date .timezone {
            font-weight: 600;
            font-size: 0.85em;
            opacity: 0.9;
            margin-left: 4px;
            letter-spacing: 0.5px;
        }

        .timeline-category {
            display: inline-block;
            padding: clamp(8px, 2vw, 10px) clamp(16px, 3.5vw, 22px);
            background: #5e7b69;
            border-radius: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: clamp(0.7rem, 2vw, 0.8rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #ffffff;
            margin-bottom: 20px;
            margin-left: 10px;
            border: 3px solid #000000;
            box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.3);
            word-break: break-word;
            position: relative;
            z-index: 2;
        }

        .timeline-title {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-weight: 900;
            margin-bottom: 25px;
            line-height: 1.1;
            color: #000000;
            font-family: 'Finger Paint', sans-serif;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            position: relative;
            z-index: 2;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 
                3px 3px 0px rgba(94, 123, 105, 0.3),
                6px 6px 0px rgba(94, 123, 105, 0.15);
            border-bottom: 4px solid #5e7b69;
            padding-bottom: 15px;
        }

        /* Description - Comic Style */
        .timeline-image {
            width: 100%;
            max-height: 320px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
            display: block;
        }

        .timeline-excerpt {
            font-size: clamp(1rem, 2.8vw, 1.2rem);
            color: #2a2a2a;
            line-height: 1.8;
            margin-bottom: 30px;
            font-family: 'Finger Paint', sans-serif;
            font-weight: 400;
            word-wrap: break-word;
            overflow-wrap: break-word;
            position: relative;
            z-index: 2;
        }

        .timeline-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: #ffffff;
            text-decoration: none;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: clamp(0.9rem, 2.2vw, 1rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            transition: all 0.3s ease;
            padding: clamp(12px, 2.5vw, 14px) clamp(24px, 5vw, 30px);
            background: #5e7b69;
            border: 4px solid #000000;
            border-radius: 0;
            box-shadow: 
                5px 5px 0px rgba(0, 0, 0, 0.4),
                10px 10px 0px rgba(0, 0, 0, 0.2);
            word-break: break-word;
            position: relative;
            z-index: 2;
        }

        .timeline-link:hover {
            background: #7a9b87;
            transform: translate(5px, 5px);
            box-shadow: 
                2px 2px 0px rgba(0, 0, 0, 0.4),
                4px 4px 0px rgba(0, 0, 0, 0.2);
            color: #ffffff;
        }

        .timeline-link::after {
            content: 'â†’';
            transition: transform 0.3s ease;
            font-weight: bold;
        }

        .timeline-link:hover::after {
            transform: translateX(5px);
        }

        /* Featured Article */
        .featured-timeline-item {
            margin-bottom: clamp(60px, 8vw, 80px);
        }

        .featured-timeline-item .timeline-content {
            background: #ffffff;
            border: 6px solid #000000;
            padding: clamp(45px, 8vw, 60px);
            box-shadow: 
                15px 15px 0px rgba(0, 0, 0, 0.6),
                30px 30px 0px rgba(0, 0, 0, 0.4),
                0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .featured-timeline-item .timeline-title {
            font-size: clamp(2rem, 6vw, 3.5rem);
        }

        .featured-timeline-item .timeline-marker {
            width: clamp(32px, 5vw, 42px);
            height: clamp(32px, 5vw, 42px);
            top: 30px;
            transform: translateX(-50%) translateY(-50%);
        }

        .featured-timeline-item .timeline-marker::before {
            box-shadow: 
                0 0 0 1px rgba(94, 123, 105, 1),
                0 6px 16px rgba(0, 0, 0, 0.6);
        }


        /* Responsive Design */
        @media (max-width: 1024px) {
            .timeline::before {
                left: 30px;
            }

            .timeline-item {
                padding-left: 80px;
            }

            .timeline-marker {
                left: 30px;
                top: 30px;
                transform: translateX(-50%) translateY(-50%);
            }
        }

        @media (max-width: 768px) {
            .bulletin-logo {
                max-width: clamp(50px, 10vw, 100px);
            }

            .bulletin-board {
                margin: clamp(20px, 4vw, 30px) auto;
                padding: clamp(20px, 4vw, 30px);
            }

            .news-container {
                padding: 90px 20px 60px;
            }


            .news-header {
                margin-bottom: 50px;
            }

            .timeline::before {
                left: 20px;
            }

            .timeline-item {
                padding-left: 60px;
                margin-right: 0;
            }

            .timeline-marker {
                left: 20px;
                top: 30px;
                transform: translateX(-50%) translateY(-50%);
                width: clamp(24px, 4vw, 32px);
                height: clamp(24px, 4vw, 32px);
            }

            .timeline-content {
                padding: 20px;
            }

            .featured-timeline-item .timeline-content {
                padding: 30px 20px;
            }

        }

        @media (max-width: 480px) {
            .bulletin-logo {
                max-width: clamp(40px, 8vw, 80px);
            }

            .timeline-content {
                padding: 18px;
            }

            .featured-timeline-item .timeline-content {
                padding: 25px 18px;
            }

            .timeline-date {
                font-size: 0.8rem;
                padding: 5px 12px;
                display: block;
                margin-bottom: 8px;
                white-space: normal;
            }

            .timeline-date .timezone {
                font-size: 0.75em;
                display: block;
                margin-top: 2px;
            }

            .timeline-category {
                display: block;
                margin-left: 0;
                margin-bottom: 12px;
            }

        }

        /* Loading Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .timeline-item {
            animation: fadeInUp 0.8s ease-out;
        }

        .timeline-item:nth-child(1) { 
            animation-delay: 0s !important; 
            /* First card should appear instantly if visible */
        }
        .timeline-item:nth-child(2) { animation-delay: 0.2s; }
        .timeline-item:nth-child(3) { animation-delay: 0.3s; }
        .timeline-item:nth-child(4) { animation-delay: 0.4s; }
        .timeline-item:nth-child(5) { animation-delay: 0.5s; }
        .timeline-item:nth-child(6) { animation-delay: 0.6s; }
        .timeline-item:nth-child(7) { animation-delay: 0.7s; }
        
        /* Disable animation for first card when it's already visible */
        .timeline-item:first-child.parallax-visible {
            animation: none !important;
        }
    </style>
</head>
<body class="loading">
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-screen-content">
            <div class="loading-percentage" id="loadingPercentage">0</div>
        </div>
    </div>
    <!-- Bulletin Board Container -->
    <div class="bulletin-board">
        <!-- Logo inside bulletin board -->
        <a href="/" class="bulletin-logo-link">
            <img src="assets/main_logo.png" alt="The Promotheans Logo" class="bulletin-logo">
        </a>

        <!-- Main Content -->
        <div class="news-container">
            <div class="news-header">
                <h1 class="news-title">Latest News</h1>
                <p class="news-subtitle">Stay Updated with Our Latest News & Announcements</p>
            </div>

        <!-- News Timeline with Parallax -->
        <div class="timeline" id="newsTimeline">
            <!-- News items will be loaded dynamically from API -->
        </div>
        </div>
    </div>

    <!-- Global API Configuration - Load this first before any other scripts -->
    <script src="api-config.js"></script>

    <script>
        // Loading Screen Functionality
        async function waitForFonts() {
            try {
                // Wait for document.fonts API to be ready
                if (!document.fonts || !document.fonts.ready) {
                    // Font API not available
                    return;
                }

                // Wait for fonts.ready with a reasonable timeout
                await Promise.race([
                    document.fonts.ready,
                    new Promise(resolve => setTimeout(resolve, 3000)) // 3 second timeout
                ]);

                // Helper function to check font with multiple variations
                function checkFont(fontFamily) {
                    return document.fonts.check(`1em "${fontFamily}"`) ||
                           document.fonts.check(`1em ${fontFamily}`) ||
                           document.fonts.check(`12px "${fontFamily}"`) ||
                           document.fonts.check(`12px ${fontFamily}`);
                }

                // Wait a bit more for any custom fonts to fully load
                await new Promise(resolve => setTimeout(resolve, 100));
            } catch (error) {
                // Error waiting for fonts
            }
        }

        async function initLoadingScreen() {
            // Wait for all fonts to load properly before proceeding
            await waitForFonts();
            
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingPercentage = document.getElementById('loadingPercentage');
            if (!loadingScreen) return;

            let currentPercentage = 0;
            let animationFrameId = null;
            let loadingComplete = false;
            const startTime = Date.now();
            const minLoadingTime = 2500; // Minimum 2.5 seconds for smooth animation
            let allContentLoaded = false;
            let imageLoadProgress = 0; // Track image loading progress (0-1)
            
            let isRolling = false;
            let rollInterval = null;
            let currentRollValue = 1;
            const rollSpeed = 15; // Milliseconds between number changes (much faster animation)

            // Continuous rolling animation from 1% to 100%
            function startRolling() {
                if (isRolling) return;
                
                isRolling = true;
                currentRollValue = 1;
                
                // Clear any existing roll interval
                if (rollInterval) {
                    clearInterval(rollInterval);
                }
                
                // Update initial value
                if (loadingPercentage) {
                    loadingPercentage.textContent = currentRollValue;
                }
                
                rollInterval = setInterval(() => {
                    // Increment the value
                    currentRollValue++;
                    
                    if (currentRollValue <= 100) {
                        // Update display with current rolling value
                        if (loadingPercentage) {
                            loadingPercentage.textContent = currentRollValue;
                        }
                    } else {
                        // Reached 100%
                        clearInterval(rollInterval);
                        rollInterval = null;
                        isRolling = false;
                        currentRollValue = 100;
                        
                        if (loadingPercentage) {
                            loadingPercentage.textContent = 100;
                        }
                        
                        // Trigger completion check
                        checkForCompletion();
                    }
                }, rollSpeed);
            }
            
            // Check if loading is complete and trigger hide
            function checkForCompletion() {
                const elapsed = Date.now() - startTime;
                const minTimeElapsed = elapsed >= minLoadingTime;
                
                if (currentRollValue >= 100 && !loadingComplete && minTimeElapsed) {
                    loadingComplete = true;
                    onLoadingComplete();
                }
            }

            // Update percentage display
            function updatePercentage() {
                if (loadingPercentage) {
                    loadingPercentage.textContent = Math.min(100, Math.max(1, currentRollValue));
                }
            }

            // Animate percentage counter
            function animatePercentage() {
                // Check for completion
                checkForCompletion();
                
                // Stop animation if complete
                if (loadingComplete) {
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                        animationFrameId = null;
                    }
                    return;
                }
                
                // Continue animation
                animationFrameId = requestAnimationFrame(animatePercentage);
            }

            // Called when loading reaches 100%
            function onLoadingComplete() {
                // Hide loading screen immediately
                hideLoadingScreen();
            }

            // Update image loading progress (0 to 1)
            function updateImageProgress(progress) {
                imageLoadProgress = Math.min(1, Math.max(0, progress));
            }

            // Mark content as fully loaded
            function markContentLoaded() {
                allContentLoaded = true;
                imageLoadProgress = 1; // Mark images as fully loaded
            }

            // Hide loading screen after page loads and content is ready
            function hideLoadingScreen() {
                // Ensure we show 100% before hiding
                if (currentRollValue < 100) {
                    currentRollValue = 100;
                    if (loadingPercentage) {
                        loadingPercentage.textContent = 100;
                    }
                    // Try again immediately
                    hideLoadingScreen();
                    return;
                }

                // Mark body as loaded to show content
                document.body.classList.remove('loading');
                document.body.classList.add('loaded');

                // Hide loading screen
                if (loadingScreen && !loadingScreen.classList.contains('hidden')) {
                    loadingScreen.classList.add('hidden');
                    // Remove from DOM after fade out completes
                    setTimeout(() => {
                        if (loadingScreen.parentNode) {
                            loadingScreen.parentNode.removeChild(loadingScreen);
                        }
                        if (animationFrameId) {
                            cancelAnimationFrame(animationFrameId);
                            animationFrameId = null;
                        }
                        // Re-enable scrolling
                        document.body.style.overflow = '';
                    }, 300);
                }
            }

            // Start animation - continuous roll from 1% to 100%
            currentRollValue = 1;
            updatePercentage();
            startRolling();
            animatePercentage();

            // Wait for images and content to load
            const images = document.querySelectorAll('img');
            const totalImages = images.length;
            let imagesLoaded = 0;

            if (totalImages === 0) {
                // No images, mark as loaded after minimum time
                setTimeout(() => {
                    markContentLoaded();
                }, minLoadingTime);
                return;
            }

            function checkAllLoaded() {
                imagesLoaded++;
                // Update image loading progress (0 to 1)
                const progress = imagesLoaded / totalImages;
                updateImageProgress(progress);
                
                if (imagesLoaded >= totalImages) {
                    // All images loaded, mark content as loaded
                    // Animation will continue to 100% naturally based on time
                    markContentLoaded();
                }
            }

            // Check if images are already loaded
            images.forEach(img => {
                if (img.complete) {
                    checkAllLoaded();
                } else {
                    img.addEventListener('load', checkAllLoaded);
                    img.addEventListener('error', checkAllLoaded); // Count errors too
                }
            });

            // Fallback: mark as loaded after maximum wait time (4 seconds)
            setTimeout(() => {
                markContentLoaded();
            }, 4000);
        }

        // API Configuration - Uses global API_BASE_URL from api-config.js
        const API_BASE = window.API_BASE_URL || 'http://localhost:3001';

        // Load news from API
        async function loadNews() {
            try {
                const response = await fetch(`${API_BASE}/api/v1/news`);
                if (!response.ok) {
                    throw new Error('Failed to fetch news');
                }
                const newsItems = await response.json();
                renderNews(newsItems);
            } catch (error) {
                // Error loading news
                // Fallback: Show error message or use default content
                document.getElementById('newsTimeline').innerHTML = 
                    '<p style="text-align: center; padding: 40px; color: #666;">Unable to load news. Please check if the backend server is running.</p>';
            }
        }

        // Render news items
        function renderNews(newsItems) {
            const timeline = document.getElementById('newsTimeline');
            timeline.innerHTML = '';

            if (newsItems.length === 0) {
                timeline.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">No news items available.</p>';
                return;
            }

            newsItems.forEach((item, index) => {
                const article = document.createElement('article');
                article.className = 'timeline-item';
                if (item.featured) {
                    article.classList.add('featured-timeline-item');
                }

                const linkTarget = item.link && item.link.startsWith('http') ? '_blank' : '_self';
                const linkRel = linkTarget === '_blank' ? 'rel="noopener noreferrer"' : '';

                article.innerHTML = `
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <span class="timeline-date">${item.date} <span class="timezone">${item.timezone || '(UTC)'}</span></span>
                        <span class="timeline-category">${item.category}</span>
                        <h2 class="timeline-title">${item.title}</h2>
                        ${item.image ? `<img src="${item.image}" alt="${item.title}" class="timeline-image" loading="lazy">` : ''}
                        <p class="timeline-excerpt">${item.excerpt}</p>
                        ${item.link ? `<a href="${item.link}" target="${linkTarget}" ${linkRel} class="timeline-link">Read More</a>` : ''}
                    </div>
                `;

                timeline.appendChild(article);
            });

            // Reinitialize parallax effects after content is loaded
            setTimeout(() => {
                initializeParallax();
            }, 100);
        }

        // Global variables for parallax
        let timelineItems = [];
        let observer = null;

        // Initialize loading screen when DOM is ready
        document.addEventListener('DOMContentLoaded', async () => {
            // Initialize loading screen (async to preload font)
            await initLoadingScreen();
            // Load news from API
            loadNews();
        });

        // Initialize parallax effects
        function initializeParallax() {
            // Add click handlers to timeline items
            document.querySelectorAll('.timeline-item').forEach(item => {
                const link = item.querySelector('.timeline-link');
                if (link) {
                    item.addEventListener('click', (e) => {
                        if (e.target !== link && !link.contains(e.target)) {
                            link.click();
                        }
                    });
                }
            });

            // Advanced Parallax Scroll Effect
            timelineItems = document.querySelectorAll('.timeline-item');
            
            if (timelineItems.length === 0) return;
            
            // Check if first card is already visible on page load and make it appear instantly
            function checkFirstCardVisibility() {
                const firstCard = timelineItems[0];
                if (firstCard && !firstCard.classList.contains('parallax-visible')) {
                    const rect = firstCard.getBoundingClientRect();
                    const windowHeight = window.innerHeight;
                    // If first card is in or near viewport (within 300px), make it visible instantly
                    if (rect.top < windowHeight + 300 && rect.bottom > -300) {
                        // Remove transition for instant appearance
                        firstCard.style.transition = 'none';
                        firstCard.style.opacity = '1';
                        firstCard.style.transform = 'translateY(0) translateZ(0) rotateX(0deg)';
                        firstCard.classList.add('parallax-visible');
                        // Force reflow
                        void firstCard.offsetWidth;
                        // Restore transition for future changes after a brief moment
                        setTimeout(() => {
                            firstCard.style.transition = '';
                        }, 100);
                    }
                }
            }
            
            // Check immediately
            checkFirstCardVisibility();
            setTimeout(checkFirstCardVisibility, 100);
            
            // Intersection Observer for initial visibility
            const observerOptions = {
                threshold: [0, 0.1, 0.15],
                rootMargin: '300px 0px -100px 0px'
            };

            // Create observer if it doesn't exist
            if (!observer) {
                observer = new IntersectionObserver((entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const isFirstCard = entry.target === timelineItems[0];
                            // For first card, ensure instant appearance
                            if (isFirstCard && !entry.target.classList.contains('parallax-visible')) {
                                entry.target.style.transition = 'none';
                                entry.target.style.opacity = '1';
                                entry.target.style.transform = 'translateY(0) translateZ(0) rotateX(0deg)';
                                setTimeout(() => {
                                    entry.target.style.transition = '';
                                }, 50);
                            }
                            // Marker appears instantly - no delay
                            entry.target.classList.add('parallax-visible');
                        }
                    });
                }, observerOptions);
            }
            
            // Function to position markers on the timeline line
            function positionMarkers() {
                const timeline = document.querySelector('.timeline');
                if (!timeline) return;
                
                const timelineRect = timeline.getBoundingClientRect();
                const scrollY = window.pageYOffset;
                const timelineTop = timelineRect.top + scrollY;
                
                // Get the left position of the timeline line (same as .timeline::before)
                const getLineLeft = () => {
                    if (window.innerWidth <= 768) return 20;
                    if (window.innerWidth <= 1024) return 30;
                    // For larger screens, use clamp calculation: clamp(30px, 5vw, 50px)
                    const vw = window.innerWidth / 100;
                    const fiveVw = 5 * vw;
                    return Math.max(30, Math.min(50, fiveVw));
                };
                
                timelineItems.forEach(item => {
                    const marker = item.querySelector('.timeline-marker');
                    if (marker) {
                        // Calculate item's final position (when visible, without translateY transform)
                        // Get the item's offsetTop relative to timeline to get its natural position
                        let itemOffsetTop = 0;
                        let currentElement = item;
                        while (currentElement && currentElement !== timeline) {
                            itemOffsetTop += currentElement.offsetTop;
                            currentElement = currentElement.offsetParent;
                        }
                        
                        // If item is visible, use getBoundingClientRect for accuracy
                        // Otherwise use offsetTop for natural position
                        const itemRect = item.getBoundingClientRect();
                        let itemTop;
                        if (item.classList.contains('parallax-visible')) {
                            // Item is visible, use actual position
                            itemTop = itemRect.top + scrollY;
                        } else {
                            // Item not yet visible, calculate natural position
                            const timelineOffsetTop = timeline.offsetTop;
                            itemTop = timelineOffsetTop + itemOffsetTop + scrollY;
                        }
                        
                        // Calculate marker position: item's top + 30px, relative to timeline
                        const markerTop = itemTop - timelineTop + 30;
                        const lineLeft = getLineLeft();
                        
                        // Position marker absolutely within timeline (not item)
                        // Move marker to timeline if it's not already there
                        if (marker.parentElement !== timeline) {
                            timeline.appendChild(marker);
                        }
                        
                        marker.style.position = 'absolute';
                        marker.style.top = `${markerTop}px`;
                        marker.style.left = `${lineLeft}px`;
                        marker.style.transform = 'translateX(-50%) translateY(-50%)';
                        marker.style.zIndex = '4';
                    }
                });
            }
            
            // Initialize items and position markers
            timelineItems.forEach(item => {
                observer.observe(item);
            });
            
            // Position markers initially and on resize/scroll
            positionMarkers();
            window.addEventListener('resize', positionMarkers);

            // Improved Parallax scroll effect - Better readability when scrolling back
            let ticking = false;
            let lastScrollY = 0;
            
            function updateParallax() {
                const scrollY = window.pageYOffset;
                const windowHeight = window.innerHeight;
                const scrollDirection = scrollY > lastScrollY ? 'down' : 'up';
                lastScrollY = scrollY;
                
                // Update marker positions to stay on line
                positionMarkers();
                
                timelineItems.forEach((item, index) => {
                    const rect = item.getBoundingClientRect();
                    const itemTop = rect.top + scrollY;
                    const itemCenter = itemTop + (rect.height / 2);
                    const distanceFromCenter = scrollY + windowHeight / 2 - itemCenter;
                    
                    // Only apply parallax if item is visible
                    if (rect.top < windowHeight && rect.bottom > 0) {
                        // Reduced parallax speed for better readability
                        const parallaxSpeed = 0.15 + (index % 3) * 0.05;
                        // Clamp parallax movement to prevent excessive displacement
                        const maxParallax = 50;
                        const translateY = Math.max(-maxParallax, Math.min(maxParallax, distanceFromCenter * parallaxSpeed));
                        const translateZ = Math.max(-10, Math.min(10, distanceFromCenter * 0.02));
                        const rotateX = Math.max(-2, Math.min(2, distanceFromCenter * 0.003));
                        
                        // Apply parallax transform with reduced intensity when scrolling up
                        if (item.classList.contains('parallax-visible')) {
                            const finalTranslateY = scrollDirection === 'up' ? translateY * 0.5 : translateY;
                            const finalTranslateZ = scrollDirection === 'up' ? translateZ * 0.5 : translateZ;
                            const finalRotateX = scrollDirection === 'up' ? rotateX * 0.5 : rotateX;
                            
                            item.style.transform = `
                                translateY(${finalTranslateY}px) 
                                translateZ(${finalTranslateZ}px) 
                                rotateX(${finalRotateX}deg)
                            `;
                            
                            // Marker position is updated by positionMarkers(), so it stays on line
                            // Marker doesn't inherit parent transforms because it's positioned absolutely
                            
                            // Add active class when in center viewport
                            if (Math.abs(distanceFromCenter) < windowHeight * 0.4) {
                                item.classList.add('parallax-active');
                            } else {
                                item.classList.remove('parallax-active');
                            }
                        }
                    } else {
                        // Reset transform when item is out of view
                        if (item.classList.contains('parallax-visible')) {
                            item.style.transform = 'translateY(0) translateZ(0) rotateX(0deg)';
                        }
                    }
                });
                
                ticking = false;
            }

            function requestTick() {
                if (!ticking) {
                    requestAnimationFrame(updateParallax);
                    ticking = true;
                }
            }

            // Smooth scroll event listener
            window.addEventListener('scroll', requestTick, { passive: true });
            
            // Initial call
            updateParallax();
        }
        
    </script>
</body>
</html>
